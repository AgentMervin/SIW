<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>智能剧本</title>
    <link href="/static/css/root.css" rel="stylesheet">
</head>

<body>

<!-- Start Page Loading -->
<div class="loading"><img src="/static/imgs/loading.gif" alt="loading-img"></div>
<!-- End Page Loading -->

<!-- START TOP -->
<div id="top" class="clearfix">

    <!-- Start App Logo -->
    <div class="applogo">
        <a href="index.html" class="logo">智能剧本</a>
    </div>
    <!-- End App Logo -->

    <!-- Start Sidebar Show Hide Button -->
    <a href="#" class="sidebar-open-button"><i class="fa fa-bars"></i></a>
    <a href="#" class="sidebar-open-button-mobile"><i class="fa fa-bars"></i></a>
    <!-- End Sidebar Show Hide Button -->

    <!-- page title -->
    {% block title %}
        <h1 class="title">剧本续写</h1>
    {% endblock %}
    <!-- End page title -->


    <!-- Start Sidepanel Show-Hide Button -->
    <a href="#sidepanel" class="sidepanel-open-button"><i class="fa fa-th-large"></i></a>
    <!-- End Sidepanel Show-Hide Button -->

    <!-- Start Top Right -->
    <ul class="top-right">
        <!-- Start Searchbox -->
        <form class="searchform">
            <input type="text" class="searchbox" id="searchbox" placeholder="搜索">
            <span class="searchbutton"><i class="fa fa-search"></i></span>
        </form>
        <!-- End Searchbox -->
        <li class="dropdown link">
            <a href="#" data-toggle="dropdown" class="dropdown-toggle hdbutton">新&nbsp;增&nbsp;<span
                    class="caret"></span></a>
            <ul class="dropdown-menu dropdown-menu-list">
                <li><a href="#"><i class="fa falist fa-suitcase"></i>产品</a></li>
                <li><a href="#"><i class="fa falist fa-comments-o"></i>博客</a></li>
                <li><a href="#"><i class="fa falist fa-image"></i>图库</a></li>
                <li><a href="#"><i class="fa falist fa-video-camera"></i>视频</a></li>
            </ul>
        </li>

        <li class="link">
            <a href="#" class="notifications">2</a>
        </li>


    </ul>
    <!-- End Top Right -->

</div>
<!-- END TOP -->
<!-- //////////////////////////////////////////////////////////////////////////// -->


<!-- //////////////////////////////////////////////////////////////////////////// -->
<!-- START SIDEBAR -->
<div class="sidebar clearfix">
    <div class="dropdown link">
        <a href="#" data-toggle="dropdown" class="dropdown-toggle profilebox"><img src="/static/imgs/profileimg.png"
                                                                                   alt="img">
            <div class="user-name"><b>张三</b><span class="caret"></span></div>
        </a>
        <ul class="dropdown-menu dropdown-menu-list dropdown-menu-right">
            <li role="presentation" class="dropdown-header">资料</li>
            <li><a href="#"><i class="fa falist fa-envelope"></i>邮箱<span class="badge label-danger">4</span></a></li>
            <li><a href="#"><i class="fa falist fa-file-o"></i>文件</a></li>
            <li><a href="#"><i class="fa falist fa-gear"></i>设置</a></li>
            <li><a href="#"><i class="fa falist fa-lock"></i> 锁屏</a></li>
            <li><a href="#"><i class="fa falist fa-power-off"></i>退出</a></li>
        </ul>

    </div>
    <ul class="sidebar-panel nav">
        <!--<li class="sidetitle">MAIN</li>-->
        <li><a href="{% url 'index' %}"><span class="icon color5"><i class="fa fa-pencil"></i></span>剧本续写</a></li>
        <li><a href="{% url 'scriptmanage' %}"><span class="icon color6"><i class="fa fa-book"></i></span>剧本管理</a></li>
        <li><a><span class="icon color14"><i class="fa fa-gear"></i></span>系统管理<span
                class="caret"></span></a>
            <ul>
                <li><a href="{% url 'permissionmanage' %}">权限管理</a></li>
                <li><a href="{% url 'rolemanage' %}">角色管理</a></li>
                <li><a href="{% url 'usermanage' %}">人员管理</a></li>
            </ul>
        </li>
    </ul>

    <!--<ul class="sidebar-panel nav">
        <li class="sidetitle">MORE</li>
        <li><a href="typography.html"><span class="icon color12"><i class="fa fa-font"></i></span>Typography</a></li>
        <li><a href="grid.html"><span class="icon color15"><i class="fa fa-columns"></i></span>Grid</a></li>
        <li><a href="customizable.html"><span class="icon color10"><i class="fa fa-lightbulb-o"></i></span>Customizable</a>
        </li>
        <li><a href="helper-classes.html"><span class="icon color8"><i class="fa fa-code"></i></span>Helper Classes</a>
        </li>
    </ul>-->


</div>
<!-- END SIDEBAR -->
<!-- //////////////////////////////////////////////////////////////////////////// -->

<!-- //////////////////////////////////////////////////////////////////////////// -->
<!-- START CONTENT -->
{% block content %}
    <div class="content">

        <!-- START CONTAINER -->
        <div class="container-widget">

            <!-- Start First Row -->
            <div class="row">

                <!-- Start Browser Stats -->
                <div class="col-md-12 col-lg-3">
                    <div class="panel panel-widget">
                        <div class="panel-title">
                            功能
                            <ul class="panel-tools panel-tools-hover">
                                <li><a class="icon minimise-tool"><i class="fa fa-minus"></i></a></li>
                                <li><a class="icon expand-tool"><i class="fa fa-expand"></i></a></li>
                                <li><a class="icon closed-tool"><i class="fa fa-times"></i></a></li>
                            </ul>
                        </div>
                        <div class="panel-body">
                            <form action="" enctype="multipart/form-data" method="post"
                                  class="fieldset-form" name="feature">
                                {% csrf_token %}
                                <fieldset>
                                    <div class="form-group"
                                         style="margin-bottom: 39px !important; margin-top: 38px !important;">
                                        <label for="Num" class="form-label">剧本字数</label>
                                        <input type="number" class="form-control" id="Num" name="Num" value="1000">
                                    </div>
                                    <div class="form-group"
                                         style="margin-bottom: 39px !important; margin-top: 38px !important;">
                                        <a class="file btn btn-default" style="width: 100%;">上传剧本
                                            <input onchange="uploadScript()" type="file" name="Files"
                                                   multiple="multiple">
                                        </a>
                                    </div>
                                    <div class="form-group"
                                         style="margin-bottom: 39px !important; margin-top: 38px !important;">
                                        <button onclick="creatScript()" class="btn btn-default" style="width: 100%;">
                                            生成剧本
                                        </button>
                                    </div>
                                </fieldset>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- End Browser Stats -->

                <!-- Start Orders -->
                <div class="col-md-12 col-lg-9">
                    <div class="panel panel-widget">
                        <div class="panel-title">
                            剧本列表 <span class="label label-warning">{{ files.count }}</span>
                            <ul class="panel-tools">
                                <li><a class="icon search-tool"><i class="fa fa-search"></i></a></li>
                                <li><a class="icon minimise-tool"><i class="fa fa-minus"></i></a></li>
                                <li><a class="icon expand-tool"><i class="fa fa-expand"></i></a></li>
                                <li><a class="icon closed-tool"><i class="fa fa-times"></i></a></li>
                            </ul>
                        </div>

                        <div class="panel-search">
                            <form>
                                <input type="text" class="form-control" placeholder="Search...">
                                <i class="fa fa-search icon"></i>
                            </form>
                        </div>


                        <div class="panel-body table-responsive" style="height: 314px">

                            <table class="table table-hover table-striped">
                                <thead>
                                <tr>
                                    <td class="text-center"><i class="fa fa-trash"></i></td>
                                    <td>剧本编号</td>
                                    <td>剧本名称</td>
                                    <td>文件格式</td>
                                    <td>上传日期</td>
                                    <td>文件大小</td>
                                </tr>
                                </thead>
                                <tbody>
                                {% for file in files %}
                                    <tr>
                                        <td class="text-center">
                                            <div class="checkbox margin-t-0"><input id="{{ file.file_id }}"
                                                                                    type="checkbox"><label
                                                    for="{{ file.file_id }}"></label></div>
                                        </td>
                                        <td># <b>{{ file.file_id }}</b></td>
                                        <td>{{ file.file_name }}</td>
                                        <td>{{ file.file_type }}</td>
                                        <td>{{ file.file_date }}</td>
                                        <td>{{ file.file_size }}</td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>

                        </div>
                    </div>
                </div>
                <!-- End Orders -->

            </div>
            <!-- End First Row -->

            <!-- Start Second Row -->
            <div class="row">

                <!-- Start Project Stats -->
                <div class="col-md-12 col-lg-12">
                    <div class="panel panel-widget gray-bg">
                        <div class="panel-title">
                            新剧本预览 <span class="label label-info">{{ error_msg }}</span>
                            <ul class="panel-tools">
                                <li><a class="icon minimise-tool"><i class="fa fa-minus"></i></a></li>
                                <li><a class="icon expand-tool"><i class="fa fa-expand"></i></a></li>
                                <li><a class="icon closed-tool"><i class="fa fa-times"></i></a></li>
                            </ul>
                        </div>

                        <div class="panel-body table-responsive">
                            <form action="" method="post" name="result">
                                {% csrf_token %}
                                <div id="summernote">{{ result }}</div>
                                <button onclick="saveFile()" class="btn btn-default">保存</button>
                                <button onclick="clearResult()" class="btn margin-l-5">清除</button>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- End Project Stats -->
            </div>
            <!-- End Second Row -->

        </div>
        <!-- End CONTAINER -->

    </div>
{% endblock %}
<!-- End Content -->
<!-- //////////////////////////////////////////////////////////////////////////// -->


<!-- //////////////////////////////////////////////////////////////////////////// -->
<!-- START SIDEPANEL -->
<div role="tabpanel" class="sidepanel">

    <!-- Nav tabs -->
    <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active"><a href="#today" aria-controls="today" role="tab"
                                                  data-toggle="tab">今天</a></li>
        <li role="presentation"><a href="#tasks" aria-controls="tasks" role="tab" data-toggle="tab">任务</a></li>
        <li role="presentation"><a href="#chat" aria-controls="chat" role="tab" data-toggle="tab">聊天</a></li>
    </ul>

    <!-- Tab panes -->
    <div class="tab-content">

        <!-- Start Today -->
        <div role="tabpanel" class="tab-pane active" id="today">

            <div class="sidepanel-m-title">
                今天
                <span class="left-icon"><a href="#"><i class="fa fa-refresh"></i></a></span>
                <span class="right-icon"><a href="#"><i class="fa fa-file-o"></i></a></span>
            </div>

            <div class="gn-title">NEW</div>

            <ul class="list-w-title">
                <li>
                    <a href="#">
                        <span class="label label-danger">周边</span>
                        <span class="date">9小时前</span>
                        <h4>新剧本</h4>
                        赵六发布了新剧本，大家速度围观！
                    </a>
                </li>
                <li>
                    <a href="#">
                        <span class="label label-success">评论</span>
                        <span class="date">14小时前</span>
                        <h4>王五</h4>
                        剧本非常精彩！
                    </a>
                </li>
                <li>
                    <a href="#">
                        <span class="label label-warning">事件</span>
                        <span class="date">3天左右</span>
                        <h4>新版本上线</h4>
                        2018年11月20号新版本上线！
                    </a>
                </li>
            </ul>

        </div>
        <!-- End Today -->

        <!-- Start Tasks -->
        <div role="tabpanel" class="tab-pane" id="tasks">

            <div class="sidepanel-m-title">
                任务列表
                <span class="left-icon"><a href="#"><i class="fa fa-pencil"></i></a></span>
                <span class="right-icon"><a href="#"><i class="fa fa-trash"></i></a></span>
            </div>

            <div class="gn-title">今天</div>

            <ul class="todo-list">
                <li class="checkbox checkbox-primary">
                    <input id="checkboxside1" type="checkbox"><label for="checkboxside1">xxxxxxxx</label>
                </li>

                <li class="checkbox checkbox-primary">
                    <input id="checkboxside2" type="checkbox"><label for="checkboxside2">xxxxxxxx</label>
                </li>

                <li class="checkbox checkbox-warning">
                    <input id="checkboxside3" type="checkbox"><label for="checkboxside3">xxxxxxxx</label>
                </li>

                <li class="checkbox checkbox-info">
                    <input id="checkboxside4" type="checkbox"><label for="checkboxside4">xxxxxxxx</label>
                </li>

                <li class="checkbox checkbox-danger">
                    <input id="checkboxside5" type="checkbox"><label for="checkboxside5">xxxxxxxx</label>
                </li>
            </ul>

            <div class="gn-title">明天</div>
            <ul class="todo-list">
                <li class="checkbox checkbox-warning">
                    <input id="checkboxside6" type="checkbox"><label for="checkboxside6">xxxxxxxx</label>
                </li>

                <li class="checkbox checkbox-success">
                    <input id="checkboxside7" type="checkbox"><label for="checkboxside7">xxxxxxxx</label>
                </li>

                <li class="checkbox checkbox-info">
                    <input id="checkboxside8" type="checkbox"><label for="checkboxside8">xxxxxxxx</label>
                </li>

            </ul>
        </div>
        <!-- End Tasks -->

        <!-- Start Chat -->
        <div role="tabpanel" class="tab-pane" id="chat">

            <div class="sidepanel-m-title">
                粉丝列表
                <span class="left-icon"><a href="#"><i class="fa fa-pencil"></i></a></span>
                <span class="right-icon"><a href="#"><i class="fa fa-trash"></i></a></span>
            </div>

            <div class="gn-title">在线（3）</div>
            <ul class="group">
                <li class="member"><a href="#"><img src="/static/imgs/profileimg.png" alt="img"><b>张三</b>北京</a><span
                        class="status online"></span></li>
                <li class="member"><a href="#"><img src="/static/imgs/profileimg2.png" alt="img"><b>李四</b>上海</a><span
                        class="status busy"></span></li>
                <li class="member"><a href="#"><img src="/static/imgs/profileimg3.png" alt="img"><b>王五</b>深证</a><span
                        class="status away"></span></li>
                <li class="member"><a href="#"><img src="/static/imgs/profileimg4.png" alt="img"><b>赵六</b>乌鲁木齐</a><span
                        class="status online"></span></li>
            </ul>

            <div class="gn-title">下线（8）</div>
            <ul class="group">
                <li class="member"><a href="#"><img src="/static/imgs/profileimg5.png" alt="img"><b>孙婷婷</b>太原</a><span
                        class="status offline"></span></li>
                <li class="member"><a href="#"><img src="/static/imgs/profileimg6.png" alt="img"><b>董丽丽</b>成都</a><span
                        class="status offline"></span></li>
            </ul>

            <form class="search">
                <input type="text" class="form-control" placeholder="搜索粉丝...">
            </form>
        </div>
        <!-- End Chat -->

    </div>

</div>
<!-- END SIDEPANEL -->

<!-- Start Footer -->
<div class="row footer">
    <div class="col-md-6 text-left">Copyright &copy; 2018.WLGD All rights reserved.</div>
    <div class="col-md-6 text-right"></div>
</div>
<!-- End Footer -->

<!-- ================================================
jQuery Library
================================================ -->
<!--<script type="text/javascript" src="/static/js/jquery-3.3.1.min.js"></script>-->
<script type="text/javascript" src="/static/js/jquery.min.js"></script>
<!-- ================================================
Bootstrap Core JavaScript File
================================================ -->
<script src="/static/js/bootstrap/bootstrap.min.js"></script>

<!-- ================================================
Plugin.js - Some Specific JS codes for Plugin Settings
================================================ -->
<script type="text/javascript" src="/static/js/plugins.js"></script>

<!-- ================================================
Bootstrap Select
================================================ -->
<script type="text/javascript" src="/static/js/bootstrap-select/bootstrap-select.js"></script>

<!-- ================================================
Bootstrap Toggle
================================================ -->
<script type="text/javascript" src="/static/js/bootstrap-toggle/bootstrap-toggle.min.js"></script>

<!-- ================================================
Bootstrap WYSIHTML5
================================================ -->
<!-- main file -->
<script type="text/javascript" src="/static/js/bootstrap-wysihtml5/wysihtml5-0.3.0.min.js"></script>
<!-- bootstrap file -->
<script type="text/javascript" src="/static/js/bootstrap-wysihtml5/bootstrap-wysihtml5.js"></script>

<!-- ================================================
Summernote
================================================ -->
<script type="text/javascript" src="/static/js/summernote/summernote.min.js"></script>

<!-- ================================================
Flot Chart
================================================ -->
<!-- main file -->
<script type="text/javascript" src="/static/js/flot-chart/flot-chart.js"></script>
<!-- time.js -->
<script type="text/javascript" src="/static/js/flot-chart/flot-chart-time.js"></script>
<!-- stack.js -->
<script type="text/javascript" src="/static/js/flot-chart/flot-chart-stack.js"></script>
<!-- pie.js -->
<script type="text/javascript" src="/static/js/flot-chart/flot-chart-pie.js"></script>
<!-- demo codes -->
<script type="text/javascript" src="/static/js/flot-chart/flot-chart-plugin.js"></script>

<!-- ================================================
Chartist
================================================ -->
<!-- main file -->
<script type="text/javascript" src="/static/js/chartist/chartist.js"></script>
<!-- demo codes -->
<script type="text/javascript" src="/static/js/chartist/chartist-plugin.js"></script>

<!-- ================================================
Easy Pie Chart
================================================ -->
<!-- main file -->
<script type="text/javascript" src="/static/js/easypiechart/easypiechart.js"></script>
<!-- demo codes -->
<script type="text/javascript" src="/static/js/easypiechart/easypiechart-plugin.js"></script>

<!-- ================================================
Sparkline
================================================ -->
<!-- main file -->
<script type="text/javascript" src="/static/js/sparkline/sparkline.js"></script>
<!-- demo codes -->
<script type="text/javascript" src="/static/js/sparkline/sparkline-plugin.js"></script>

<!-- ================================================
Rickshaw
================================================ -->
<!-- d3 -->
<script src="/static/js/rickshaw/d3.v3.js"></script>
<!-- main file -->
<script src="/static/js/rickshaw/rickshaw.js"></script>
<!-- demo codes -->
<script src="/static/js/rickshaw/rickshaw-plugin.js"></script>

<!-- ================================================
Data Tables
================================================ -->
<script src="/static/js/datatables/datatables.min.js"></script>

<!-- ================================================
Sweet Alert
================================================ -->
<script src="/static/js/sweet-alert/sweet-alert.min.js"></script>

<!-- ================================================
Modern Alert
================================================ -->
<script src="/static/js/Modern-alert/main.js"></script>

<!-- ================================================
Gmaps
================================================ -->
<!---<script src="http://maps.google.com/maps/api/js?sensor=true"></script>
<script src="/static/js/gmaps/gmaps.js"></script>
<script src="/static/js/gmaps/gmaps-plugin.js"></script>--->

<!-- ================================================
jQuery UI
================================================ -->
<script type="text/javascript" src="/static/js/jquery-ui/jquery-ui.min.js"></script>

<!-- ================================================
Moment.js
================================================ -->
<script type="text/javascript" src="/static/js/moment/moment.min.js"></script>

<!-- ================================================
Full Calendar
================================================ -->
<script type="text/javascript" src="/static/js/full-calendar/fullcalendar.js"></script>

<!-- ================================================
Bootstrap Date Range Picker
================================================ -->
<script type="text/javascript" src="/static/js/date-range-picker/daterangepicker.js"></script>

<!-- ================================================
Below codes are only for index widgets
================================================ -->
<!-- Today Sales -->
<script>

    // set up our data series with 50 random data points

    var seriesData = [[], [], []];
    var random = new Rickshaw.Fixtures.RandomData(20);

    for (var i = 0; i < 110; i++) {
        random.addData(seriesData);
    }

    // instantiate our graph!

    /* ======================================================================
    TIME SCALE
    ====================================================================== */
    var seriesData = [[], [], []];
    var random = new Rickshaw.Fixtures.RandomData(1540000);

    for (var i = 0; i < 200; i++) {
        random.addData(seriesData);
    }

    var graph = new Rickshaw.Graph({
        element: document.getElementById("rickshaw-timescale"),
        renderer: 'area',
        series: [
            {
                color: "#3f51b5",
                data: seriesData[0],
                name: 'Technology'
            },

            {
                color: "#7183e8",
                data: seriesData[1],
                name: 'Creative'
            },

            {
                color: "#aab6fc",
                data: seriesData[2],
                name: 'Ecommerce'
            }
        ]
    });

    graph.render();

    var hoverDetail = new Rickshaw.Graph.HoverDetail({
        graph: graph,
        formatter: function (series, x, y) {
            var date = '<span class="date">' + new Date(x * 1000).toUTCString() + '</span>';
            var swatch = '<span class="detail_swatch" style="background-color: ' + series.color + '"></span>';
            var content = swatch + series.name + ": " + parseInt(y) + '<br>' + date;
            return content;
        }
    });

</script>

<!-- Today Activity -->
<script>
    // set up our data series with 50 random data points

    var seriesData = [[], [], []];
    var random = new Rickshaw.Fixtures.RandomData(20);

    for (var i = 0; i < 50; i++) {
        random.addData(seriesData);
    }

    // instantiate our graph!

    var graph = new Rickshaw.Graph({
        element: document.getElementById("rickshaw-bars"),
        renderer: 'bar',
        series: [
            {
                color: "#303f9f",
                data: seriesData[0],
                name: 'Job'
            }, {
                color: "#ef4836",
                data: seriesData[1],
                name: 'Feed'
            }
        ]
    });

    graph.render();

    var hoverDetail = new Rickshaw.Graph.HoverDetail({
        graph: graph,
        formatter: function (series, x, y) {
            var date = '<span class="date">' + new Date(x * 1000).toUTCString() + '</span>';
            var swatch = '<span class="detail_swatch" style="background-color: ' + series.color + '"></span>';
            var content = swatch + series.name + ": " + parseInt(y) + '<br>' + date;
            return content;
        }
    });
</script>

<script>
    var options = {
        scaleColor: false,
        trackColor: 'rgba(255, 255, 255, 0.5)',
        barColor: '#fff',
        lineWidth: 8,
        lineCap: 'butt',
    };
</script>

<script>
    /* BOOTSTRAP WYSIHTML5 */
    $('.textarea').wysihtml5();

    /* SUMMERNOTE*/
    $('#summernote').summernote();
</script>

<script>
    function uploadScript() {
        document.feature.action = "{% url 'upload' %}";
        document.feature.submit();
    }

    function creatScript() {
        var selectList = jQuery("table tbody input[type=checkbox]:checked").map(function () {
            return jQuery(this).attr('id');
        }).get().join(',');
        var url = "{% url 'creat' 'null' %}".replace('null', selectList ? selectList : 'null');
        document.feature.action = url;
        document.feature.submit();
    }

    function saveFile() {
        document.result.action = "{% url 'save' %}";
        document.result.submit();
    }

    function clearResult() {
        document.result.action = "{% url 'clear' %}";
        document.result.submit();
    }
</script>

</body>
</html>